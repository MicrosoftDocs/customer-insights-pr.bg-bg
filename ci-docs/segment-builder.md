---
title: Създаване на сложни сегменти с конструктор на сегменти
description: Използвайте конструктора на сегменти, за да създавате сложни сегменти от клиенти, като ги групирате въз основа на различни атрибути.
ms.date: 08/12/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: 7f691fd0b2ea76a2960d5adf766a4b166f02ebb4
ms.sourcegitcommit: 267c317e10166146c9ac2c30560c479c9a005845
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 08/16/2022
ms.locfileid: "9304736"
---
# <a name="create-complex-segments-with-segment-builder"></a>Създаване на сложни сегменти с конструктор на сегменти

Дефинирайте сложни филтри около унифицирания клиент или унифициран контакт и това са свързани обекти. Всеки сегмент, след обработката, създава набор от записи на клиенти или контакти, които можете да експортирате и да предприемете действия.

> [!TIP]
> Сегменти въз основа на **индивидуални клиенти** автоматично включва наличната информация за контакт за членовете на сегмента. В **бизнес акаунтите**, ако [сте унифицирали](data-unification.md) както партньори, така и контакти, изберете дали сегментът да се основава на акаунти или бизнес контакти. За да експортирате в местоназначение, очакващо информация за контакт, използвайте сегмент от контакти. За да експортирате в местоназначение, очакващо информация за профила, използвайте сегмент от акаунти.

## <a name="segment-builder"></a>Създател на сегменти

Следното изображение илюстрира различните аспекти на конструктора на сегменти. Той показва сегмент, който води до група клиенти. Клиентите поръчват стоки в определен период от време и събират наградни точки или изразходват определена сума пари.

:::image type="content" source="media/segment-builder-overview.png" alt-text="Елементи на конструктора на сегменти." lightbox="media/segment-builder-overview.png":::

1. Организирайте сегмента с правила и подправила. Всяко правило или подправило се състои от условия. Комбинирайте условията с логическите оператори.

1. Изберете [пътя на релацията](relationships.md) между обектите, която се прилага към правило. Пътят на релацията определя кои атрибути могат да се използват в условие.

1. Управление на правила и подправила. Променете позицията на правило или го изтрийте.

1. Добавете условия и изградете правилното ниво на влагане с помощта на подправила.

1. Приложете зададени операции към свързани правила.

1. Използвайте прозореца с атрибути, за да добавите налични атрибути на обект или да създадете условия въз основа на атрибути. Прозорецът показва списъка с обекти и атрибути въз основа на избрания път на релация, които са налични за избраното правило.

1. Добавете условия въз основа на атрибути към съществуващите правила и подправила или ги добавете към ново правило.

1. Отмяна и връщане на промените при изграждането на сегмента.

Горният пример илюстрира способността за сегментиране. Определихме сегмент за клиенти, закупили поне стоки онлайн за поне 500 $ *и* имате интерес към разработването на софтуер.

## <a name="create-a-new-segment-with-segment-builder"></a>Създаване на нов сегмент с конструктора на сегменти

1. Към **Сегменти**.

1. Изберете **Създаване** > **Създаване на свой собствен**. На страницата за създаване на сегменти определяте или съставяте правила. Правилото се състои от едно или повече условия, които определят набор от клиенти.

   > [!NOTE]
   > За среди въз основа на бизнес акаунти изберете **Нов** > **сегмент от акаунти** или **Сегмент от контакти (визуализация)** въз основа на типа сегмент, който искате да създадете. Ако е [дефинирана йерархия](relationships.md#set-up-account-hierarchies) на профила и искате да създадете правила за филтриране на данни въз основа на релацията между деца и родители, изберете **Използване на йерархия? (визуализация)**, изберете йерархията и след това **Приложи**.
   >
   > :::image type="content" source="media/segment_acct_hierarchy.png" alt-text="Сегмент изберете акаунт йерархия панел.":::

1. Изберете **Редактиране на подробни данни** до Сегмент Без заглавия. Посочете име за вашия сегмент и актуализирайте предложеното **Име на изходния обект** за сегмента. По желание добавете описание и [маркери](work-with-tags-columns.md#manage-tags) към сегмента.

   :::image type="content" source="media/segments_edit_details.png" alt-text="Редактиране на диалоговия прозорец подробности.":::

1. В секцията **Правило1** изберете атрибут на обект, по който искате да филтрирате клиентите. Има два начина да изберете атрибути:
   - Прегледайте списъка с налични обекти и атрибути в **Добавяне към правило** панела и изберете **+** икона до атрибута за добавяне. Изберете дали искате да добавите атрибута към съществуващо правило или да го използвате за създаване на ново правило.
   - Въведете името на атрибута в раздела за правила, за да видите съвпадащи предложения.

1. Изберете операторите, за да посочите съвпадащите стойности на условието. Атрибутът може да има един от четирите типа данни като стойност: числов, низ, дата или булев. В зависимост от типа данни на атрибута, различни оператори са на разположение за задаване на условието.

1. Изберете **Добавете условие**, за да добавите още условия към правило. За да създадете правило съгласно текущото правило, изберете **Добавете подправило**.

1. Ако дадено правило използва други обекти от *обекта Клиент* (или *обекта КонтактПрофил* за B-to-B), изберете **Задаване на път** на релация, за да нанесете избрания обект на единния обект клиент. Ако има само един възможен път на релация, системата го избира автоматично. Различните [пътища](relationships.md#relationship-paths) на релация могат да дават различни резултати. Всяко правило може да има свой собствен път на взаимоотношения.

   :::image type="content" source="media/relationship-path.png" alt-text="Потенциален път на връзка при създаване на правило въз основа на обект, съпоставен с обединения клиентски обект.":::

1. Ако имате няколко условия в правило, изберете кой логически оператор ги свързва.  
   - **AND** оператор: Всички условия трябва да бъдат изпълнени, за да се включи запис в сегмента. Използвайте тази опция, когато дефинирате условия в различни обекти.
   - **OR** оператор: което и да е условие трябва да е изпълнено, за да се включи запис в сегмента. Използвайте тази опция, когато дефинирате няколко условия за един и същ обект.

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="Правило с две условия AND.":::

   Когато използвате оператора OR, всички условия трябва да се основават на обекти, включени в пътя на връзката.

1. За да създадете различни набори от записи на клиенти, създайте няколко правила. За да включите клиентите, необходими за вашия бизнес случай, комбинирайте групи. По-конкретно, ако не можете да включите обект в правило поради указания път на релация, създайте ново правило за избор на атрибути от него.

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="Добавете ново правило към сегмент и изберете оператора за задаване.":::

   1. Изберете **Добавяне на правило**.
   1. Изберете един от зададените оператори: **Съюз**, **Пресичане** или **С изключение**.

      - **Обединяването** съединява двете групи.
      - **Пресичането** припокрива двете групи. Само данни, които *са общи* за двете групи, остават в унифицираната група.
      - **Освен** комбинира двете групи. Само данните в група А, които *не са общи* за данните в група Б, се съхраняват.

1. По подразбиране изходният обект автоматично ще съдържа всички атрибути на клиентски профили, които съответстват на дефинираните филтри. В B-to-B при използване на *обекта Профил на контакт*, ИД на акаунт автоматично се включва. Ако даден сегмент се основава на други обекти от *обекта "Клиент"* или за включване на *повече атрибути от профила* на контакт, изберете **Атрибути** на проекта, за да добавите повече атрибути от тези обекти към изходния обект.
 
   Например: Сегментът се основава на обект, който съдържа данни за покупки, който е свързан с *Клиент* обект. Сегментът търси всички клиенти от Испания, закупили стоки през текущата година. Можете да изберете да приложете атрибути като цената на стоките, или датата на покупка към всички съответстващи записи на клиенти в обекта на продукцията. Тази информация може да бъде полезна за анализ на сезонните корелации към общите разходи.

   :::image type="content" source="media/segments-project-attributes.png" alt-text="Пример за проектирани атрибути, избрани в страничния панел, за да бъдат добавени към изходния обект.":::
 
   Примерните изходни данни за сегмент, базиран на бизнес акаунти с прогнозирани атрибути на контакти, може да изглеждат така:

   |ИД  |Име на акаунта  |Приходи  |Име на контакт  | Роля на контакт|
   |---------|---------|---------|---------|---|
   |10021     | Contoso | 100 хиляди | [Abbie Moss, Ruth Soto]  | [Изпълнителен директор, мениджър снабдяване]

   > [!NOTE]
   > - **Атрибутите** на проекта работят само за обекти, които имат релация "едно към много" с *обекта "Клиент"* или *"Профил на контакт* ". Например, един клиент може да има няколко абонамента.
   > - Ако атрибутът, който искате да прожектирате, е на повече от един хоп далеч от *обекта Клиент* или *КонтактПрофил*, както е определено от релацията, този атрибут трябва да се използва във всяко правило на заявката за сегмент, която изграждате.
   > - Ако атрибутът, който искате да проектирате, е само на един хоп далеч от *обекта Клиент* или *КонтактПрофил*, този атрибут не е необходимо да присъства във всяко правило на заявката за сегмент, която изграждате.
   > - **Проектираните атрибути** се вземат предвид, когато се използват оператори на множество.

1. Изберете **Изпълнение**, за да създадете сегмента. Изберете **Запиши**, ако искате да запазите текущата конфигурация и изпълнете сегмента по-късно. Страницата **Сегменти** показва.

### <a name="segment-builder-tips"></a>Съвети за конструктора на сегменти

Когато създавате сегмент с помощта на конструктора на сегменти, имайте предвид следните съвети:

- Създателят на сегменти няма да предложи валидни стойности от обекти, когато задава операторите за условията. Можете да отидете на **Данни** > **Обекти** и да изтеглете данните за обекта, за да видите кои стойности са налични.
- Условия въз основа на дати ви позволяват да превключвате между фиксирани дати и плаващ период от време.
- Ако имате няколко правила за сегмента си, правилото, което редактирате, има вертикална синя линия до него.
- Можете да преместите правила и условия на други места в дефиницията на сегмента. Изберете вертикалното елипсис (&vellip;) до правило или условие и изберете как и къде да го преместите.
- Контролите **Отмяна** и **Повторение** в командната лента ви позволяват да върнете промените.
- След създаването на сегмент някои сегменти ви позволяват да [проследявате използването на сегмента](segments.md#track-usage-of-a-segment).

## <a name="next-steps"></a>Следващи стъпки

[Експортирайте сегмент](export-destinations.md) и разгледайте [интеграцията на карта на клиент](customer-card-add-in.md), за да използвате сегментите в други приложения.

[!INCLUDE [footer-include](includes/footer-banner.md)]

---
title: Свържете се с Power Query източник на данни (съдържа видео)
description: Поглъщане на Power Query данни чрез конектор (съдържа видео).
ms.date: 09/29/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-data-sources
- ci-create-data-source
- customerInsights
ms.openlocfilehash: 4cc7e57dfb0f8d050e91adc441c24e849882f5d8
ms.sourcegitcommit: be341cb69329e507f527409ac4636c18742777d2
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 09/30/2022
ms.locfileid: "9609863"
---
# <a name="connect-to-a-power-query-data-source"></a>Свържете се с Power Query източник на данни

Power Query предлага широк набор от конектори за поглъщане на данни. Повечето от тези конектори се поддържат от Dynamics 365 Customer Insights.

Добавянето на източници на данни, базирани на конектори, Power Query обикновено следва стъпките, описани в този раздел. В зависимост от конектора, който използвате обаче, се изисква различна информация. За да научите повече, вижте документацията за отделните конектори в [Power Query конектора](/power-query/connectors/).

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RWN6EK]

## <a name="create-a-new-data-source"></a>Създаване на нов източник на данни

1. Отидете на **Данни** > **Източници на данни**.

1. Изберете **Добавяне на източник на данни**.

1. Изберете **Microsoft Power Query**.

1. Посочете **име** и незадължително **описание** за източник на данни и изберете **Напред**.

1. Изберете един от [наличните конектори](#available-power-query-data-sources). В този пример избираме конектора Text **/CSV**.

1. Въведете необходимите подробности в **Настройки за връзка** за избрания конектор и изберете **Напред**, за да визуализирате данните.

1. Изберете **Трансформиране на данни**.

1. Прегледайте и прецизирайте данните си в страницата - Редактиране на **Power Query заявки**. Обектите, идентифицирани от системите в избрания източник на данни, се показват в левия екран.

   :::image type="content" source="media/data-manager-configure-edit-queries.png" alt-text="Диалогов прозорец „Редактиране на заявки“":::

1. Трансформирайте данните си. Изберете обект, който да редактирате или преобразувате. Използвайте опциите в прозореца, Power Query за да приложите трансформации. Всяка трансформация е посочена в **приложените стъпки**. Power Query осигурява множество [предварително изградени опции за трансформация](/power-query/power-query-what-is-power-query#transformations).

   > [!IMPORTANT]
   > Препоръчваме ви да използвате следните трансформации:
   >
   > - Ако поглъщате данни от CSV файл, първият ред често съдържа заглавки. Отидете в **Трансформиране** и изберете **Използвайте първия ред като заглавки**.
   > - Уверете се, че типът данни е зададен по подходящ начин и съответства на данните. Например, за полета за дати изберете тип дата.

1. За да добавите допълнителни единици към източник на данни си в диалоговия прозорец за заявки **за редактиране, отидете в** Home **и изберете** Получаване на **данни**. Повторете стъпки 5-10, докато не добавите всички същности за тази източник на данни. Ако имате база данни, която включва много набори от данни, всеки набор от данни е собствен обект.

1. Изберете **Записване**. Страницата **с източници** на данни се отваря, показвайки новия източник на данни в **освежаващо** състояние.

   [!INCLUDE [progress-details-include](includes/progress-details-pane.md)]

Зареждането на данни може да отнеме време. След успешно обновяване, погълнатите данни могат да бъдат прегледани от страницата на Същностите [**·**](entities.md).

> [!CAUTION]
>
> - A източник на данни, базиран на Power Query създава поток от [данни в Dataverse](/power-query/dataflows/overview-dataflows-across-power-platform-dynamics-365). Не променяйте името на потока от данни в административния Power Platform център, който се използва в Customer Insights. Преименуването на поток от данни причинява проблеми с препратките между източник на данни на клиентските прозрения и потока от Dataverse данни.
> - Едновременните оценки за източници на данни в Customer Insights имат същите Power Query ограничения за [обновяване като Dataflows в PowerBI.com](/power-query/power-query-online-limits#refresh-limits). Ако обновяването на данните не успее, защото е достигнало лимита за оценка, препоръчваме ви да коригирате графика за обновяване за всеки поток от данни, за да сте сигурни, че източниците на данни не се обработват едновременно.

### <a name="available-power-query-data-sources"></a>Налични Power Query източници на данни

Вижте препратка [Power Query към](/power-query/connectors/) конектора за списък с конектори, които можете да използвате за импортиране на данни към Клиентски прозрения.

Конектори с отметка в колоната Клиентски прозрения (Dataflows) **са на разположение за създаване на** нови източници на данни въз основа на Power Query. Прегледайте документацията на конкретен конектор, за да научите повече за неговите предпоставки, [ограничения](/power-query/power-query-online-limits) на заявките и други подробности.

## <a name="add-data-from-on-premises-data-sources"></a>Добавяне на данни от локални източници на данни

Поглъщането на данни от локален източници на данни се поддържа въз основа на потоци от Microsoft Power Platform данни (PPDF). Можете да активирате потоци от данни в Клиентски прозрения, като [предоставите URL адреса Microsoft Dataverse на околната среда при настройване на](create-environment.md) околната среда.

Източниците на данни, които са създадени след асоцииране на Dataverse среда с Customer Insights, използват [Power Platform потоци](/power-query/dataflows/overview-dataflows-across-power-platform-dynamics-365) от данни по подразбиране. Потоците от данни поддържат локална свързаност чрез шлюзовете за данни. Можете да премахнете и пресъздадете източници на данни, които са съществували преди околната Dataverse среда да е била свързана с [помощта на портали за данни локален](/data-integration/gateway/service-gateway-app).

Порталите за данни от съществуваща Power BI или Power Apps околна среда ще бъдат видими и можете да ги използвате повторно в Customer Insights, ако порталът за данни и средата на Customer Insights са в същия регион на Azure. Страницата с източници на данни показва връзки към Microsoft Power Platform среда, където можете да преглеждате и конфигурирате локален шлюзове за данни.

> [!IMPORTANT]
> Уверете се, че вашите портали са актуализирани до най-новата версия. Можете да инсталирате актуализация и да преконфигурирате шлюз от подкана, показана директно на екрана на шлюза, или [да изтеглите най-новата версия](https://powerapps.microsoft.com/downloads/). Ако не използвате най-новата версия на шлюза, обновяването на потока от данни се проваля със съобщения за грешки като **ключовата дума не се поддържа: свойства на конфигурацията. Име на параметъра: ключова дума**.
>
> Грешките с шлюзовете локален данни в Customer Insights често са причинени от проблеми с конфигурацията. За повече информация относно шлюзовете за данни за отстраняване на неизправности вижте [Отстраняване на неизправности в портала за данни](/data-integration/gateway/service-gateway-tshoot) на локален.

## <a name="edit-power-query-data-sources"></a>Редактиране на източници на Power Query данни

> [!NOTE]
> Възможно е да не е възможно да се направят промени в източниците на данни, които в момента се използват в един от процесите на приложението (например сегментиране или обединяване на данни).
>
> В страницата Настройки **можете** да проследите напредъка на всеки от активните процеси. Когато даден процес приключи, можете да се върнете в страницата **Източници на данни** и да направите промени.

1. Отидете на **Данни** > **Източници на данни**.

1. До източник на данни, които искате да актуализирате, изберете **Редактиране**.

1. Приложете промените и трансформациите си в диалоговия прозорец - Редактиране на **Power Query заявки**, както е описано в раздела Създаване на [нов източник на данни.](#create-a-new-data-source)

1. Изберете **Запиши**, за да приложите промените си и да се върнете към страницата с източници **на** данни.

   [!INCLUDE [progress-details-include](includes/progress-details-pane.md)]

## <a name="common-reasons-for-ingestion-errors-or-corrupt-data"></a>Общи причини за грешки при поглъщане или повредени данни

### <a name="data-type-does-not-match-data"></a>Типът данни не съответства на данните

Най-често срещаното несъответствие на типа данни възниква, когато поле за дата не е зададено на правилния формат за дата.

Данните могат да бъдат фиксирани при източника и повторно погълнати. Или поправете трансформацията в рамките на клиентските прозрения. За да поправите трансформацията:

1. Отидете на **Данни** > **Източници на данни**.

1. До източник на данни с повредените данни изберете **Редактиране**.

1. Изберете **Напред**.

1. Изберете всяка от заявките и потърсете трансформации, приложени в "Приложени стъпки", които са неправилни, или колони за дати, които не са трансформирани с формат за дата.

   :::image type="content" source="media/PQ_corruped_date.png" alt-text="Power Query- Редактиране, показващо неправилен формат на датата":::

1. Променете типа данни, за да съответства правилно на данните.

1. Изберете **Записване**. Това източник на данни е освежено.

## <a name="troubleshoot-ppdf-power-query-based-data-source-refresh-issues"></a>Отстраняване на неизправности PPDF Power Query-базирани източник на данни опресняване проблеми

Ако данните са остарели или получавате грешки след източник на данни обновяване, изпълнете следните стъпки:

1. Навигирайте до [Power Platform](https://make.powerapps.com).

1. Изберете **средата** за вашия клиент Insights инстанция.

1. Навигирайте до потоците **от** данни.

1. За потока от данни, който съответства на източник на данни в Customer Insights, изберете вертикалната елипсис (&vellip;) и след това изберете **Показване на историята** на опресняването.

1. **Ако състоянието** на потока от данни е успех **, собствеността на** базираната източник на данни може да се е Power Query променила:

   1. Прегледайте графика за опресняване от историята на опресняването.
   1. Задайте графика на новия собственик и запишете настройките.

1. **Ако състоянието** на потока от данни е **неуспешно**:

   1. Изтеглете файла за история на обновяването.
   1. Прегледайте изтегления файл поради причината за неуспеха.
   1. Ако грешката не може да бъде разрешена, изберете **?** За да отворите билет за поддръжка. Включете изтегления файл за история на опресняването.


[!INCLUDE [footer-include](includes/footer-banner.md)]

---
title: Постъпково обновяване за Power Query източници на данни и Azure Data Lake
description: Обновяване на нови и актуализирани данни за големи източници на данни въз основа на Power Query или Azure данни езеро източници на данни.
ms.date: 05/30/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-system-schedule
- customerInsights
ms.openlocfilehash: bff27bf7fec2bcb741846ae76bb1f616f459136c
ms.sourcegitcommit: 5e26cbb6d2258074471505af2da515818327cf2c
ms.translationtype: MT
ms.contentlocale: bg-BG
ms.lasthandoff: 06/14/2022
ms.locfileid: "9012012"
---
# <a name="incremental-refresh-for-power-query-and-azure-data-lake-data-sources"></a>Постъпково обновяване за Power Query източници на данни и Azure Data Lake

В тази статия се обсъжда как да конфигурирате постъпково обновяване за източници на данни въз основа на Power Query или Azure Data Lake.

Постъпковото обновяване за източници на данни предоставя следните предимства:

- **По-бързо обновяване** – Само данните, които са променени, се обновяват. Например, можете да обновите само последните пет дни от хронологичен набор от данни.
- **Повишена надеждност** – При по-малки обновявания не е необходимо да поддържате връзки към системи с променливи източници за дълго време, като така се намалява риска от проблеми с връзката.
- **Намалено потребление на ресурси** – Обновяването само на поднабор от общите ви данни води до по-ефективно използване на ресурси за изчисление и намалява следите от него в средата.

## <a name="configure-incremental-refresh-for-data-sources-based-on-power-query"></a>Конфигуриране на постъпково обновяване за източници на данни въз основа на Power Query

Customer Insights позволява постъпково обновяване за източници на данни, импортирани чрез Power Query които поддържат постъпково поглъщане. Например бази данни на SQL в Azure с полета за дата и час, които показват кога записите на данни са актуализирани за последен път.

1. [Създаване на нов източник на данни въз основа на Power Query](connect-power-query.md).

1. Изберете източник на данни, който поддържа постъпково обновяване, като [база данни на Azure SQL](/power-query/connectors/azuresqldatabase).

1. Изберете обектите или таблиците за поглъщане.

1. Изпълнете стъпките за трансформация и изберете **Напред**.

1. В диалоговия прозорец **Настройка на постъпково обновяване** изберете **Настройка**, за да отворите **Настройки на постъпково обновяване**. Ако изберете **Пропускане**, източникът на данни ще обнови целия набор от данни.
   > [!TIP]
   > Можете също да приложите постъпково обновяване по-късно, като редактирате съществуващ източник на данни.

1. В **Настройки за постъпково обновяване** ще конфигурирате постъпковото обновяване за всички обекти, които сте избрали при създаването на източника на данни.

   :::image type="content" source="media/incremental-refresh-settings.png" alt-text="Конфигуриране на настройките за постъпково обновяване.":::

1. Изберете обект и предоставете следните подробности:

   - **Дефиниране на първичния ключ**: Изберете първичен ключ за обекта или таблицата.
   - **Дефиниране на „последно актуализирано“ поле**: Това поле ще показва само атрибути от тип дата или час. Изберете атрибут, който показва кога записите са актуализирани за последен път. Той ще се използва за идентифициране на записите, които попадат в границите на продължителността на постъпковото обновяване.
   - **Проверка за актуализации на всеки**: Укажете колко дълго искате да продължава периодът на постъпково обновяване.

1. Изберете **Записване**, за да завършите създаването на източника на данни. Първоначалното обновяване на данните ще бъде пълно обновяване. След това постъпковото обновяване на данните става както е конфигурирано в предишната стъпка.

## <a name="configure-incremental-refresh-for-azure-data-lake-data-sources"></a>Конфигуриране на постъпково обновяване за източници на данни на Azure Data Lake

Customer Insights позволява постъпково обновяване за източници на данни, свързани с Azure Data Lake Storage. За да използвате постъпково поглъщане и обновяване за даден обект, конфигурирайте този обект при добавяне на azure data lake източник на данни или по-нова версия при редактиране на източник на данни. Папката с данни на обекта трябва да съдържа следните папки:

- **FullData**: Папка с файлове с данни, съдържащи първоначални записи
- **IncrementalData**: Папка с папки за йерархия на дата/час в **ггггг/мм/дд/чх** формат, съдържаща постъпково актуализациите. **hh** представлява UTC час на актуализациите и съдържа **папките Upserts** и **Изтрива**. **Upserts** съдържа файлове с данни с актуализации на съществуващи записи или нови записи. **Изтрива** съдържа файлове с данни със записи, които трябва да бъдат премахнати.

1. Когато добавяте или редактирате източник на данни, навигирайте до **екрана "Атрибути**" за обекта.

1. Прегледайте атрибутите. Уверете се, че е настроен създаден или последно актуализиран атрибут за дата с *формат dateTime* **Data и** тип Calendar.Date *Semantic* **.** Редактирайте атрибута, ако е необходимо, и изберете **Готово**.

1. От екрана Избор на **обекти** редактирайте обекта. **Отметнато е квадратчето За постъпково поглъщане**.

   :::image type="content" source="media/ADLS_inc_refresh.png" alt-text="Конфигуриране на обекти в източник на данни за постъпково обновяване.":::

   1. Прегледайте главната папка, която съдържа .csv или .parquet файлове за пълни данни, постъпково вмъкване на данни и постъпково изтривания на данни.
   1. Въведете разширението за пълните данни и двете постъпково файлове (\. csv или \. паркет).
   1. Изберете **Записване**.

1. За **Последно актуализиран** изберете атрибута за времево клеймо за дата.

1. Ако **основният ключ** не е избран, изберете основния ключ. Основният ключ е атрибут, уникален за обекта. За да бъде атрибутът валиден първичен ключ, той не трябва да включва дублирани стойности, липсващи стойности или нулеви стойности. Низ, цяло число и GUID тип данни атрибути се поддържат като основни ключове.

1. Изберете **Затвори**, за да запишете и затворите екрана.

1. Продължете с добавянето или редактирането на източник на данни.

[!INCLUDE [footer-include](includes/footer-banner.md)]

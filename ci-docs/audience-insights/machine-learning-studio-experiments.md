---
title: Експерименти в Machine Learning Studio (classic)
description: Използвайте модели на Machine Learning Studio (classic) в Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 8a861d62bdfee6a3a82468fe1ab4a3fbbdad43d4
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 02/15/2021
ms.locfileid: "5270191"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="73bab-103">Използвайте модели, базирани на Azure Machine Learning Studio (classic)</span><span class="sxs-lookup"><span data-stu-id="73bab-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="73bab-104">Единните данни в Dynamics 365 Customer Insights са източник за изграждане на модели на машинно обучение, които могат да генерират допълнителни бизнес прозрения.</span><span class="sxs-lookup"><span data-stu-id="73bab-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="73bab-105">Customer Insights се интегрира с Machine Learning Studio (classic), за да използва вашите собствени персонализирани модели.</span><span class="sxs-lookup"><span data-stu-id="73bab-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="73bab-106">За да видите как моделите, разработени в Azure Machine Learning се интегрират с Customer Insights, вижте [Експерименти на Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="73bab-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="73bab-107">Предварителни изисквания</span><span class="sxs-lookup"><span data-stu-id="73bab-107">Prerequisites</span></span>

- <span data-ttu-id="73bab-108">Достъп до Customer Insights</span><span class="sxs-lookup"><span data-stu-id="73bab-108">Access to Customer Insights</span></span>
- <span data-ttu-id="73bab-109">Активен корпоративен абонамент за Azure</span><span class="sxs-lookup"><span data-stu-id="73bab-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="73bab-110">Унифицирани клиентски профили</span><span class="sxs-lookup"><span data-stu-id="73bab-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="73bab-111">Настройка на [Експорт на обект в хранилището за BLOB на Azure](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="73bab-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="73bab-112">Настройване на Machine Learning Studio Classic</span><span class="sxs-lookup"><span data-stu-id="73bab-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="73bab-113">Като първа стъпка трябва да създадем работно пространство за и да отворим Machine Learning Studio (classic).</span><span class="sxs-lookup"><span data-stu-id="73bab-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="73bab-114">Отидете на[https://www.portal.azure.com](https://www.portal.azure.com/) и влезте.</span><span class="sxs-lookup"><span data-stu-id="73bab-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="73bab-115">Изберете **Създаване на ресурс**.</span><span class="sxs-lookup"><span data-stu-id="73bab-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="73bab-116">Потърсете **Machine Learning Studio Workspace** и изберете **Създаване**.</span><span class="sxs-lookup"><span data-stu-id="73bab-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="73bab-117">Въведете необходимите данни за [създаване на работното пространство](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="73bab-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="73bab-118">Изберете **Ценово ниво на плана за уеб услуги** въз основа на количеството данни, които планирате да импортирате.</span><span class="sxs-lookup"><span data-stu-id="73bab-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="73bab-119">За най-добра производителност, изберете **Местоположение**, което е географски най-близко до вас.</span><span class="sxs-lookup"><span data-stu-id="73bab-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="73bab-120">След създаването на ресурса ще се покаже таблото за управление на работна област на студиото на Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="73bab-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="73bab-121">Изберете **Стартирайте Студио на Machine Learning**.</span><span class="sxs-lookup"><span data-stu-id="73bab-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Потребителски интерфейс на Студио на Azure Machine Learning](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="73bab-123">Работа със Студио на Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="73bab-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="73bab-124">Вече можете да създадете нов експеримент или да импортирате съществуващ шаблон за експеримент от галерията с проби.</span><span class="sxs-lookup"><span data-stu-id="73bab-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="73bab-125">Има примерни експерименти за три стандартни сценария:</span><span class="sxs-lookup"><span data-stu-id="73bab-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="73bab-126">Прогноза за избиване</span><span class="sxs-lookup"><span data-stu-id="73bab-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="73bab-127">Стойност на жизнения цикъл на клиента</span><span class="sxs-lookup"><span data-stu-id="73bab-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="73bab-128">Препоръка за продукта или следващо най-добро действие</span><span class="sxs-lookup"><span data-stu-id="73bab-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="73bab-129">Ако създадете нов експеримент или използвате шаблон за експеримент от галерията, трябва да конфигурирате свойствата **Импортиране на данни**.</span><span class="sxs-lookup"><span data-stu-id="73bab-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="73bab-130">Използвайте ръководството или директно предоставете подробности за достъп до хранилище за BLOB на Azure, което съдържа вашите данни.</span><span class="sxs-lookup"><span data-stu-id="73bab-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Експеримент на Студио на Azure Machine Learning](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="73bab-132">Сега можете да изградите персонализиран конвейер за обработка, за да почистите и обработите предварително данните, да извлечете функции и да обучите подходящ модел.</span><span class="sxs-lookup"><span data-stu-id="73bab-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="73bab-133">Тествайте и оптимизирайте работата на модела.</span><span class="sxs-lookup"><span data-stu-id="73bab-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="73bab-134">Когато сте доволни от качеството на даден модел, изберете **Настройте уеб услуга** > **Предсказваща уеб услуга**.</span><span class="sxs-lookup"><span data-stu-id="73bab-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="73bab-135">Тази опция импортира обучения модел и характеристиката на конвейера от тренировъчния експеримент към услуга за прогнозиране.</span><span class="sxs-lookup"><span data-stu-id="73bab-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="73bab-136">Предсказващата услуга може да вземе друг набор от входни данни със схемата, използвана в тренировъчния експеримент, за да прави прогнози.</span><span class="sxs-lookup"><span data-stu-id="73bab-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Създайте прогнозна уеб услуга](media/predictive-webservice-control.png)

1. <span data-ttu-id="73bab-138">След като успешният експеримент за уеб услуги е успешен, можете да го разгърнете за автоматично планиране.</span><span class="sxs-lookup"><span data-stu-id="73bab-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="73bab-139">За да накарате уеб услугата да работи с Customer Insights, изберете **Разгърнете уеб услуга** > **Разгърнете Уеб услугата [New] Преглед**.</span><span class="sxs-lookup"><span data-stu-id="73bab-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="73bab-140">[Научете повече за внедряването на уеб услуга](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="73bab-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Внедряване на прогнозна уеб услуга](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="73bab-142">Примерни модели от галерията</span><span class="sxs-lookup"><span data-stu-id="73bab-142">Sample models from the gallery</span></span>

<span data-ttu-id="73bab-143">Ще използваме фиктивен сценарий на хотел Contoso за моделите в тази статия.</span><span class="sxs-lookup"><span data-stu-id="73bab-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="73bab-144">Хотел Contoso събира следните данни:</span><span class="sxs-lookup"><span data-stu-id="73bab-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="73bab-145">CRM данни, състоящи се от престой в хотела.</span><span class="sxs-lookup"><span data-stu-id="73bab-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="73bab-146">Наборът от данни включва информация за датите на престой за всеки регистриран клиент.</span><span class="sxs-lookup"><span data-stu-id="73bab-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="73bab-147">Той също така съдържа информация за резервацията, типовете стаи, подробности за разходите и т.н.</span><span class="sxs-lookup"><span data-stu-id="73bab-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="73bab-148">Данните обхващат четири години, от януари 2014 г. до януари 2018 г.</span><span class="sxs-lookup"><span data-stu-id="73bab-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="73bab-149">Потребителски профили на гостите на хотела.</span><span class="sxs-lookup"><span data-stu-id="73bab-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="73bab-150">Тези профили съдържат информация за всеки клиент, включително тяхното име, дата на раждане, пощенски адрес, пол и телефонен номер.</span><span class="sxs-lookup"><span data-stu-id="73bab-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="73bab-151">Използване на услугите, предлагани от хотела, като спа, пералня, WiFi или куриер.</span><span class="sxs-lookup"><span data-stu-id="73bab-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="73bab-152">Тази информация се регистрира за всеки регистриран клиент.</span><span class="sxs-lookup"><span data-stu-id="73bab-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="73bab-153">Обикновено използването на услуги е свързано с престоя.</span><span class="sxs-lookup"><span data-stu-id="73bab-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="73bab-154">В някои случаи услугите могат да се използват от клиентите, без да останат в хотела.</span><span class="sxs-lookup"><span data-stu-id="73bab-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="73bab-155">Анализ за избиване</span><span class="sxs-lookup"><span data-stu-id="73bab-155">Churn Analysis</span></span>

<span data-ttu-id="73bab-156">Анализът за избиване се прилага за различни области на бизнеса.</span><span class="sxs-lookup"><span data-stu-id="73bab-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="73bab-157">В този пример ще разгледаме обслужването, особено в контекста на хотелските услуги, както е описано по-горе.</span><span class="sxs-lookup"><span data-stu-id="73bab-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="73bab-158">Той предоставя работещ пример за конвейер от край до край, който може да бъде използван като отправна точка за всеки друг тип модел за избиване.</span><span class="sxs-lookup"><span data-stu-id="73bab-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="73bab-159">Определение на отклонение</span><span class="sxs-lookup"><span data-stu-id="73bab-159">Definition of Churn</span></span>

<span data-ttu-id="73bab-160">Определението за избиване може да се различава в зависимост от сценария.</span><span class="sxs-lookup"><span data-stu-id="73bab-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="73bab-161">В този пример гост, който не е посещавал хотела през последната година, трябва да бъде етикетиран като изрязан.</span><span class="sxs-lookup"><span data-stu-id="73bab-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="73bab-162">Шаблонът на експеримента може да бъде импортиран от галерията.</span><span class="sxs-lookup"><span data-stu-id="73bab-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="73bab-163">Първо, уверете се, че импортирате данните за **Активност за настаняване в хотел**, **Данни за клиенти** и **Данни за ползване на услуги** от хранилището за BLOB на Azure.</span><span class="sxs-lookup"><span data-stu-id="73bab-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Импортиране на данни за модела за избиване](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="73bab-165">Снабдяване с функции</span><span class="sxs-lookup"><span data-stu-id="73bab-165">Featurization</span></span>

<span data-ttu-id="73bab-166">Въз основа на определението за отклонение, първо идентифицираме суровите характеристики, които ще повлияят на етикета.</span><span class="sxs-lookup"><span data-stu-id="73bab-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="73bab-167">След това ние обработваме тези сурови функции в числови функции, които могат да се използват с модели на машинно обучение.</span><span class="sxs-lookup"><span data-stu-id="73bab-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="73bab-168">Интегрирането на данни се случва в Customer Insights, за да можем да се присъединим към тези таблици с помощта на *Клиентски номер*.</span><span class="sxs-lookup"><span data-stu-id="73bab-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Присъединяване на импортирани данни](media/join-imported-data.png)

<span data-ttu-id="73bab-170">Снабдяването с функции за изграждане на модела за анализ за избиване може да бъде малко трудно.</span><span class="sxs-lookup"><span data-stu-id="73bab-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="73bab-171">Данните са функция на времето с нови дейности в хотела, регистрирани ежедневно.</span><span class="sxs-lookup"><span data-stu-id="73bab-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="73bab-172">По време на снабдяването с функции искаме да генерираме статични характеристики от динамичните данни.</span><span class="sxs-lookup"><span data-stu-id="73bab-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="73bab-173">В този случай ние генерираме множество функции от хотелска дейност с плъзгащ се прозорец от една година.</span><span class="sxs-lookup"><span data-stu-id="73bab-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="73bab-174">Ние също така разширяваме категоричните функции като тип стая или тип резервация в отделни функции, използвайки еднократно кодиране.</span><span class="sxs-lookup"><span data-stu-id="73bab-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="73bab-175">Окончателен списък с функции:</span><span class="sxs-lookup"><span data-stu-id="73bab-175">Final list of features:</span></span>

| <span data-ttu-id="73bab-176">**Число**</span><span class="sxs-lookup"><span data-stu-id="73bab-176">**Number**</span></span>  | <span data-ttu-id="73bab-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="73bab-177">**Original_Column**</span></span>          | <span data-ttu-id="73bab-178">**Извлечени функции**</span><span class="sxs-lookup"><span data-stu-id="73bab-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="73bab-179">1</span><span class="sxs-lookup"><span data-stu-id="73bab-179">1</span></span>           | <span data-ttu-id="73bab-180">Тип стая</span><span class="sxs-lookup"><span data-stu-id="73bab-180">Room Type</span></span>                    | <span data-ttu-id="73bab-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="73bab-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="73bab-182">2</span><span class="sxs-lookup"><span data-stu-id="73bab-182">2</span></span>           | <span data-ttu-id="73bab-183">Тип резервация</span><span class="sxs-lookup"><span data-stu-id="73bab-183">Booking Type</span></span>                 | <span data-ttu-id="73bab-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="73bab-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="73bab-185">3</span><span class="sxs-lookup"><span data-stu-id="73bab-185">3</span></span>           | <span data-ttu-id="73bab-186">Категория на пътуване</span><span class="sxs-lookup"><span data-stu-id="73bab-186">Travel Category</span></span>              | <span data-ttu-id="73bab-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="73bab-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="73bab-188">4</span><span class="sxs-lookup"><span data-stu-id="73bab-188">4</span></span>           | <span data-ttu-id="73bab-189">Похарчени долари</span><span class="sxs-lookup"><span data-stu-id="73bab-189">Dollars Spent</span></span>                | <span data-ttu-id="73bab-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="73bab-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="73bab-191">5</span><span class="sxs-lookup"><span data-stu-id="73bab-191">5</span></span>           | <span data-ttu-id="73bab-192">Дати на настаняване и плащане</span><span class="sxs-lookup"><span data-stu-id="73bab-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="73bab-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="73bab-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="73bab-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="73bab-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="73bab-195">6</span><span class="sxs-lookup"><span data-stu-id="73bab-195">6</span></span>           | <span data-ttu-id="73bab-196">Използване на услуга</span><span class="sxs-lookup"><span data-stu-id="73bab-196">Service Usage</span></span>                | <span data-ttu-id="73bab-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="73bab-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="73bab-198">Избор на модел</span><span class="sxs-lookup"><span data-stu-id="73bab-198">Model selection</span></span>

<span data-ttu-id="73bab-199">Сега трябва да изберем оптималния алгоритъм, който да използваме.</span><span class="sxs-lookup"><span data-stu-id="73bab-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="73bab-200">В този случай повечето функции се основават на категорични характеристики.</span><span class="sxs-lookup"><span data-stu-id="73bab-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="73bab-201">Обикновено моделите на базата на дърво на решения работят добре.</span><span class="sxs-lookup"><span data-stu-id="73bab-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="73bab-202">Ако има само цифрови характеристики, невронните мрежи могат да бъдат по-добър избор.</span><span class="sxs-lookup"><span data-stu-id="73bab-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="73bab-203">Поддържащата векторна машина (SVM) също е добър кандидат в такива ситуации; обаче се нуждае от доста настройка, за да извлече най-доброто представяне.</span><span class="sxs-lookup"><span data-stu-id="73bab-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="73bab-204">Ние избираме **Двукласно усилено дърво за решения** като първи модел на избор, последван от **Двукласен SVM** като втори модел.</span><span class="sxs-lookup"><span data-stu-id="73bab-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="73bab-205">Студио на Azure Machine Learning ви позволява да направите A/B тестване, така че е изгодно да започнете с два модела, а не с един.</span><span class="sxs-lookup"><span data-stu-id="73bab-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="73bab-206">Следното изображение показва модела на тръбопровода за обучение и оценка от Студио на Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="73bab-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Модел за избиване в Студио на Azure Machine Learning](media/azure-machine-learning-model.png)

<span data-ttu-id="73bab-208">Прилагаме и техника, наречена **Значение на функцията за пермутация**, важен аспект на оптимизацията на модела.</span><span class="sxs-lookup"><span data-stu-id="73bab-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="73bab-209">Вградените модели нямат почти никаква представа за въздействието на която и да е конкретна функция върху крайния прогноза.</span><span class="sxs-lookup"><span data-stu-id="73bab-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="73bab-210">Калкулаторът за значимост на характеристиките използва персонализиран алгоритъм, за да изчисли влиянието на отделните характеристики върху резултата за конкретен модел.</span><span class="sxs-lookup"><span data-stu-id="73bab-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="73bab-211">Значението на функцията се нормализира между +1 до -1.</span><span class="sxs-lookup"><span data-stu-id="73bab-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="73bab-212">Отрицателно влияние означава, че съответната характеристика оказва контраинтуитивно влияние върху резултата и трябва да бъде премахната от модела.</span><span class="sxs-lookup"><span data-stu-id="73bab-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="73bab-213">Положителното влияние показва, че функцията допринася значително за прогноза.</span><span class="sxs-lookup"><span data-stu-id="73bab-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="73bab-214">Тези стойности не са коефициенти на корелация, тъй като са различни показатели.</span><span class="sxs-lookup"><span data-stu-id="73bab-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="73bab-215">За повече информация вижте [Значение на функцията за пермутация](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="73bab-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="73bab-216">Целият [експеримент за оттегляне е наличен в галерията на Azure AI](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="73bab-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="73bab-217">Прогноза за стойност на жизнения цикъл на клиента</span><span class="sxs-lookup"><span data-stu-id="73bab-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="73bab-218">Изчисляването на стойността на живота на клиента (CLTV) е една от основните показатели, които бизнесът може да използва за оценка и сегментиране на своите клиенти.</span><span class="sxs-lookup"><span data-stu-id="73bab-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="73bab-219">За хотелиерския бизнес е изключително важно да знаете техните клиенти.</span><span class="sxs-lookup"><span data-stu-id="73bab-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="73bab-220">Например разбирането на факторите, които изграждат добри клиенти, е решаваща информация.</span><span class="sxs-lookup"><span data-stu-id="73bab-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="73bab-221">Това помага на управлението на хотела да прецени върху кои функции трябва да се съсредоточи и подобри, за да задоволи високоплатените си клиенти.</span><span class="sxs-lookup"><span data-stu-id="73bab-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="73bab-222">Тези решения могат да имат пряко влияние върху продажбите и печалбите.</span><span class="sxs-lookup"><span data-stu-id="73bab-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="73bab-223">Дефиниция на CLTV</span><span class="sxs-lookup"><span data-stu-id="73bab-223">Definition of CLTV</span></span>

<span data-ttu-id="73bab-224">За този пример ние определяме CLTV на клиент като общата сума в долара, която се очаква клиентът да изразходва през следващите 365 дни.</span><span class="sxs-lookup"><span data-stu-id="73bab-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="73bab-225">Ще използваме данните от последните три години за всички клиенти, за да прогнозираме тази стойност.</span><span class="sxs-lookup"><span data-stu-id="73bab-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="73bab-226">Снабдяване с функции</span><span class="sxs-lookup"><span data-stu-id="73bab-226">Featurization</span></span>

<span data-ttu-id="73bab-227">В този случай представянето ще прилича много на сценария за разбъркване.</span><span class="sxs-lookup"><span data-stu-id="73bab-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="73bab-228">Обаче етикетите и прогнозираните стойности са различни от определените по-горе.</span><span class="sxs-lookup"><span data-stu-id="73bab-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="73bab-229">Избор на модел</span><span class="sxs-lookup"><span data-stu-id="73bab-229">Model selection</span></span>

<span data-ttu-id="73bab-230">Предсказването на CLTV е проблем с регресията, тъй като прогнозираната стойност е непрекъсната положителна стойност.</span><span class="sxs-lookup"><span data-stu-id="73bab-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="73bab-231">Въз основа на свойствата на функциите, ние избираме **Подсилена регресия на дърво с решения** като един алгоритъм и **Регресия на невронната мрежа** като друг алгоритъм за обучение на модела.</span><span class="sxs-lookup"><span data-stu-id="73bab-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="73bab-232">Препоръка за продукта или следващо най-добро действие</span><span class="sxs-lookup"><span data-stu-id="73bab-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="73bab-233">Препоръката за продукт в хотелски сценарий се тълкува като препоръчване на услугите, предлагани от хотела на клиентите.</span><span class="sxs-lookup"><span data-stu-id="73bab-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="73bab-234">Целта е да се изберат подходящи услуги за клиентите, така че използването им да бъде максимално.</span><span class="sxs-lookup"><span data-stu-id="73bab-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="73bab-235">Подобно е на препоръките за филми за потребителите на услуги за стрийминг на видео.</span><span class="sxs-lookup"><span data-stu-id="73bab-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="73bab-236">Дефиниция на препоръка за продукта или следващо най-добро действие</span><span class="sxs-lookup"><span data-stu-id="73bab-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="73bab-237">Ние определяме целта като максимално използване на услугата в долара, като предлагаме най-добрите услуги за съвпадение на клиентите на хотела според техния интерес.</span><span class="sxs-lookup"><span data-stu-id="73bab-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="73bab-238">Снабдяване с функции</span><span class="sxs-lookup"><span data-stu-id="73bab-238">Featurization</span></span>

<span data-ttu-id="73bab-239">Подобно на модела за избиване, ние се присъединяваме към ServiceCustomerID на хотела с CustomerID, за да създаваме последователно препоръки за CustomerID.</span><span class="sxs-lookup"><span data-stu-id="73bab-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Снабдяване с функции на модела на препоръка](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="73bab-241">Данните са получени от три различни единици и характеристики са извлечени от тях.</span><span class="sxs-lookup"><span data-stu-id="73bab-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="73bab-242">Характеристиката на проблема с препоръките е различна в сравнение със сценариите за разбъркване или CLTV.</span><span class="sxs-lookup"><span data-stu-id="73bab-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="73bab-243">Моделът на препоръката се нуждае от входни данни под формата на три набора от функции.</span><span class="sxs-lookup"><span data-stu-id="73bab-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="73bab-244">Избор на модел</span><span class="sxs-lookup"><span data-stu-id="73bab-244">Model selection</span></span>

<span data-ttu-id="73bab-245">Ние прогнозираме продукти или услуги, като използваме алгоритъма, наречен **Препоръчващ за кибритена кутия за обучение** за обучение на модела на препоръките.</span><span class="sxs-lookup"><span data-stu-id="73bab-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Алгоритъм за препоръки за продукти](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="73bab-247">Трите входни порта за модела на **Препоръчващ за кибритена кутия за обучение** включват данни за използването на услугите за обучение, описание на клиента (незадължително) и описание на услугата.</span><span class="sxs-lookup"><span data-stu-id="73bab-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="73bab-248">Има три различни начина за оценка на модела.</span><span class="sxs-lookup"><span data-stu-id="73bab-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="73bab-249">Единият е за оценка на модела, при който се изчислява нормиран дисконтиран кумулативен приход (NDCG) за класиране на класираните позиции.</span><span class="sxs-lookup"><span data-stu-id="73bab-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="73bab-250">В този експеримент имаме NDCG резултат като 0,97.</span><span class="sxs-lookup"><span data-stu-id="73bab-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="73bab-251">Другите две опции са оценка на модела в целия препоръчителен каталог на услуги или оценка само на артикули, които потребителите не са използвали преди.</span><span class="sxs-lookup"><span data-stu-id="73bab-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="73bab-252">Разглеждайки по-нататък разпределението на препоръките в целия каталог на услуги, забелязваме, че телефонът, WiFi и куриерът са топ услугите, които трябва да се препоръчват.</span><span class="sxs-lookup"><span data-stu-id="73bab-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="73bab-253">Това е в съответствие с това, което открихме от разпространението на данните за потреблението на услуги:</span><span class="sxs-lookup"><span data-stu-id="73bab-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Изходен резултат на модел на препоръка](media/azure-machine-learning-model-output.png)

<span data-ttu-id="73bab-255">Целият [Експеримент с препоръки за продукти може да бъде намерен в AI галерията на Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="73bab-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="73bab-256">Интегриране на персонализирани модели</span><span class="sxs-lookup"><span data-stu-id="73bab-256">Integrate custom models</span></span>

<span data-ttu-id="73bab-257">За да използвате тези прогнози в Customer Insights, трябва да **експортирате** прогнозите, заедно с идентификационните номера на клиента.</span><span class="sxs-lookup"><span data-stu-id="73bab-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="73bab-258">[Експортирайте ги в същото място на хранилище за BLOB на Azure](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), в което експортирате изходните данни.</span><span class="sxs-lookup"><span data-stu-id="73bab-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="73bab-259">Услугата за предсказване може да бъде планирана да се изпълнява редовно и да актуализира резултатите.</span><span class="sxs-lookup"><span data-stu-id="73bab-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="73bab-260">Данните, генерирани от персонализирания модел, могат да се използват за допълнително обогатяване на вашите клиентски данни.</span><span class="sxs-lookup"><span data-stu-id="73bab-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="73bab-261">За повече информация вижте [Персонализирани модели за машинно обучение](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="73bab-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
---
title: Експерименти в Machine Learning Studio (classic)
description: Използвайте модели на Machine Learning Studio (classic) в Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 2eb44604e72b32292f971754d4f8c4fd1988c697
ms.sourcegitcommit: dab2cbf818fafc9436e685376df94c5e44e4b144
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 07/13/2021
ms.locfileid: "6555156"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a>Използвайте модели, базирани на Azure Machine Learning Studio (classic)

Единните данни в Dynamics 365 Customer Insights са източник за изграждане на модели на машинно обучение, които могат да генерират допълнителни бизнес прозрения. Customer Insights се интегрира с Machine Learning Studio (classic), за да използва вашите собствени персонализирани модели. За да видите как моделите, разработени в Azure Machine Learning се интегрират с Customer Insights, вижте [Експерименти на Azure Machine Learning](azure-machine-learning-experiments.md).

## <a name="prerequisites"></a>Предварителни изисквания

- Достъп до Customer Insights
- Активен корпоративен абонамент за Azure
- [Унифицирани клиентски профили](data-unification.md)
- Настройка на [Експорт на обект в хранилището за BLOB на Azure](export-azure-blob-storage.md)

## <a name="set-up-machine-learning-studio-classic"></a>Настройване на Machine Learning Studio Classic

Като първа стъпка трябва да създадем работно пространство за и да отворим Machine Learning Studio (classic).

1. Отидете на[https://www.portal.azure.com](https://www.portal.azure.com/) и влезте.

1. Изберете **Създаване на ресурс**.

1. Потърсете **Machine Learning Studio Workspace** и изберете **Създаване**.

1. Въведете необходимите данни за [създаване на работното пространство](/azure/machine-learning/studio/create-workspace). Изберете **Ценово ниво на плана за уеб услуги** въз основа на количеството данни, които планирате да импортирате. За най-добра производителност, изберете **Местоположение**, което е географски най-близко до вас.

1. След създаването на ресурса ще се покаже таблото за управление на работна област на студиото на Machine Learning. Изберете **Стартирайте Студио на Machine Learning**.

   ![Потребителски интерфейс на Azure Machine Learning Studio.](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a>Работа със Студио на Azure Machine Learning

Вече можете да създадете нов експеримент или да импортирате съществуващ шаблон за експеримент от галерията с проби. Има примерни експерименти за три стандартни сценария:

- [Прогноза за избиване](#churn-analysis)

- [Стойност на жизнения цикъл на клиента](#customer-lifetime-value-prediction)

- [Препоръка за продукта или следващо най-добро действие](#productrecommendation-or-next-best-action)

1. Ако създадете нов експеримент или използвате шаблон за експеримент от галерията, трябва да конфигурирате свойствата **Импортиране на данни**. Използвайте ръководството или директно предоставете подробности за достъп до хранилище за BLOB на Azure, което съдържа вашите данни.  

   ![Експеримент на Azure Machine Learning Studio.](media/azure-machine-learning-studio-experiment.png)

1. Сега можете да изградите персонализиран конвейер за обработка, за да почистите и обработите предварително данните, да извлечете функции и да обучите подходящ модел.

1. Тествайте и оптимизирайте работата на модела.

1. Когато сте доволни от качеството на даден модел, изберете **Настройте уеб услуга** > **Предсказваща уеб услуга**. Тази опция импортира обучения модел и характеристиката на конвейера от тренировъчния експеримент към услуга за прогнозиране. Предсказващата услуга може да вземе друг набор от входни данни със схемата, използвана в тренировъчния експеримент, за да прави прогнози.

   ![Създайте прогнозна уеб услуга.](media/predictive-webservice-control.png)

1. След като успешният експеримент за уеб услуги е успешен, можете да го разгърнете за автоматично планиране. За да накарате уеб услугата да работи с Customer Insights, изберете **Разгърнете уеб услуга** > **Разгърнете Уеб услугата [New] Преглед**. [Научете повече за внедряването на уеб услуга](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).

   ![Внедряване на прогнозна уеб услуга.](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a>Примерни модели от галерията

Ще използваме фиктивен сценарий на Contoso Hotel за моделите в тази статия. Contoso Hotel събира следните данни:

- CRM данни, състоящи се от престой в хотела. Наборът от данни включва информация за датите на престой за всеки регистриран клиент. Той също така съдържа информация за резервацията, типовете стаи, подробности за разходите и т.н. Данните обхващат четири години, от януари 2014 г. до януари 2018 г.
- Потребителски профили на гостите на хотела. Тези профили съдържат информация за всеки клиент, включително тяхното име, дата на раждане, пощенски адрес, пол и телефонен номер.
- Използване на услугите, предлагани от хотела, като спа, пералня, WiFi или куриер. Тази информация се регистрира за всеки регистриран клиент. Обикновено използването на услуги е свързано с престоя. В някои случаи услугите могат да се използват от клиентите, без да останат в хотела.

## <a name="churn-analysis"></a>Анализ за избиване

Анализът за избиване се прилага за различни области на бизнеса. В този пример ще разгледаме обслужването, особено в контекста на хотелските услуги, както е описано по-горе. Той предоставя работещ пример за конвейер от край до край, който може да бъде използван като отправна точка за всеки друг тип модел за избиване.

### <a name="definition-of-churn"></a>Определение на отклонение

Определението за избиване може да се различава в зависимост от сценария. В този пример гост, който не е посещавал хотела през последната година, трябва да бъде етикетиран като изрязан.  

Шаблонът на експеримента може да бъде импортиран от галерията. Първо, уверете се, че импортирате данните за **Активност за настаняване в хотел**, **Данни за клиенти** и **Данни за ползване на услуги** от хранилището за BLOB на Azure.

   ![Импортиране на данни за модела на отлив.](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a>Снабдяване с функции

Въз основа на определението за отклонение, първо идентифицираме суровите характеристики, които ще повлияят на етикета. След това ние обработваме тези сурови функции в числови функции, които могат да се използват с модели на машинно обучение. Интегрирането на данни се случва в Customer Insights, за да можем да се присъединим към тези таблици с помощта на *Клиентски номер*.

   ![Присъединяване на импортирани данни.](media/join-imported-data.png)

Снабдяването с функции за изграждане на модела за анализ за избиване може да бъде малко трудно. Данните са функция на времето с нови дейности в хотела, регистрирани ежедневно. По време на снабдяването с функции искаме да генерираме статични характеристики от динамичните данни. В този случай ние генерираме множество функции от хотелска дейност с плъзгащ се прозорец от една година. Ние също така разширяваме категоричните функции като тип стая или тип резервация в отделни функции, използвайки еднократно кодиране.  

Окончателен списък с функции:

| **Число**  | **Original_Column**          | **Извлечени функции**                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1           | Тип стая                    | RoomTypeLargeCount, RoomTypeSmallCount                                                                                                    |
| 2           | Тип резервация                 | BookingTypeOnlineCount, BookingTypePhoneCallCount                                                                                         |
| 3           | Категория на пътуване              | TravelCategoryBusinessCount, TravelCategoryLeisureCount                                                                                   |
| 4           | Похарчени долари                | TotalDollarSpent                                                                                                                          |
| 5           | Дати на настаняване и плащане  | StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016. StayCount2015, StayCount2014                |
| 6           | Използване на услуга                | UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage  |

### <a name="model-selection"></a>Избор на модел

Сега трябва да изберем оптималния алгоритъм, който да използваме. В този случай повечето функции се основават на категорични характеристики. Обикновено моделите на базата на дърво на решения работят добре. Ако има само цифрови характеристики, невронните мрежи могат да бъдат по-добър избор. Поддържащата векторна машина (SVM) също е добър кандидат в такива ситуации; обаче се нуждае от доста настройка, за да извлече най-доброто представяне. Ние избираме **Двукласно усилено дърво за решения** като първи модел на избор, последван от **Двукласен SVM** като втори модел. Студио на Azure Machine Learning ви позволява да направите A/B тестване, така че е изгодно да започнете с два модела, а не с един.

Следното изображение показва модела на тръбопровода за обучение и оценка от Студио на Azure Machine Learning:

![Модел на отлив в Azure Machine Learning Studio.](media/azure-machine-learning-model.png)

Прилагаме и техника, наречена **Значение на функцията за пермутация**, важен аспект на оптимизацията на модела. Вградените модели нямат почти никаква представа за въздействието на която и да е конкретна функция върху крайния прогноза. Калкулаторът за значимост на характеристиките използва персонализиран алгоритъм, за да изчисли влиянието на отделните характеристики върху резултата за конкретен модел. Значението на функцията се нормализира между +1 до -1. Отрицателно влияние означава, че съответната характеристика оказва контраинтуитивно влияние върху резултата и трябва да бъде премахната от модела. Положителното влияние показва, че функцията допринася значително за прогноза. Тези стойности не са коефициенти на корелация, тъй като са различни показатели. За повече информация вижте [Значение на функцията за пермутация](/azure/machine-learning/studio-module-reference/permutation-feature-importance).

Целият [експеримент за оттегляне е наличен в галерията на Azure AI](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).

## <a name="customer-lifetime-value-prediction"></a>Прогноза за стойност на жизнения цикъл на клиента

Изчисляването на стойността на живота на клиента (CLTV) е една от основните показатели, които бизнесът може да използва за оценка и сегментиране на своите клиенти. За хотелиерския бизнес е изключително важно да знаете техните клиенти. Например разбирането на факторите, които изграждат добри клиенти, е решаваща информация. Това помага на управлението на хотела да прецени върху кои функции трябва да се съсредоточи и подобри, за да задоволи високоплатените си клиенти. Тези решения могат да имат пряко влияние върху продажбите и печалбите.  

### <a name="definition-of-cltv"></a>Дефиниция на CLTV

За този пример ние определяме CLTV на клиент като общата сума в долара, която се очаква клиентът да изразходва през следващите 365 дни. Ще използваме данните от последните три години за всички клиенти, за да прогнозираме тази стойност.

### <a name="featurization"></a>Снабдяване с функции

В този случай представянето ще прилича много на сценария за разбъркване. Обаче етикетите и прогнозираните стойности са различни от определените по-горе.

### <a name="model-selection"></a>Избор на модел

Предсказването на CLTV е проблем с регресията, тъй като прогнозираната стойност е непрекъсната положителна стойност. Въз основа на свойствата на функциите, ние избираме **Подсилена регресия на дърво с решения** като един алгоритъм и **Регресия на невронната мрежа** като друг алгоритъм за обучение на модела.

## <a name="product-recommendation-or-next-best-action"></a>Препоръка за продукта или следващо най-добро действие

Препоръката за продукт в хотелски сценарий се тълкува като препоръчване на услугите, предлагани от хотела на клиентите. Целта е да се изберат подходящи услуги за клиентите, така че използването им да бъде максимално. Подобно е на препоръките за филми за потребителите на услуги за стрийминг на видео.

### <a name="definition-of-product-recommendation-or-next-best-action"></a>Дефиниция на препоръка за продукта или следващо най-добро действие

Ние определяме целта като максимално използване на услугата в долара, като предлагаме най-добрите услуги за съвпадение на клиентите на хотела според техния интерес.

### <a name="featurization"></a>Снабдяване с функции

Подобно на модела за избиване, ние се присъединяваме към ServiceCustomerID на хотела с CustomerID, за да създаваме последователно препоръки за CustomerID.

![Снабдяване с функции на модела на препоръка.](media/azure-machine-learning-model-featurization.png)

Данните са получени от три различни единици и характеристики са извлечени от тях. Характеристиката на проблема с препоръките е различна в сравнение със сценариите за разбъркване или CLTV. Моделът на препоръката се нуждае от входни данни под формата на три набора от функции.

### <a name="model-selection"></a>Избор на модел

Ние прогнозираме продукти или услуги, като използваме алгоритъма, наречен **Препоръчващ за кибритена кутия за обучение** за обучение на модела на препоръките.

![Алгоритъм за препоръки за продукти.](media/azure-machine-learning-model-recommendation-algorithm.png)

Трите входни порта за модела на **Препоръчващ за кибритена кутия за обучение** включват данни за използването на услугите за обучение, описание на клиента (незадължително) и описание на услугата. Има три различни начина за оценка на модела. Единият е за оценка на модела, при който се изчислява нормиран дисконтиран кумулативен приход (NDCG) за класиране на класираните позиции. В този експеримент имаме NDCG резултат като 0,97. Другите две опции са оценка на модела в целия препоръчителен каталог на услуги или оценка само на артикули, които потребителите не са използвали преди.

Разглеждайки по-нататък разпределението на препоръките в целия каталог на услуги, забелязваме, че телефонът, WiFi и куриерът са топ услугите, които трябва да се препоръчват. Това е в съответствие с това, което открихме от разпространението на данните за потреблението на услуги:

![Изходен резултат на модел на препоръка.](media/azure-machine-learning-model-output.png)

Целият [Експеримент с препоръки за продукти може да бъде намерен в AI галерията на Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)

## <a name="integrate-custom-models"></a>Интегриране на персонализирани модели

За да използвате тези прогнози в Customer Insights, трябва да **експортирате** прогнозите, заедно с идентификационните номера на клиента. [Експортирайте ги в същото място на хранилище за BLOB на Azure](/azure/storage/common/storage-import-export-data-from-blobs), в което експортирате изходните данни. Услугата за предсказване може да бъде планирана да се изпълнява редовно и да актуализира резултатите.

Данните, генерирани от персонализирания модел, могат да се използват за допълнително обогатяване на вашите клиентски данни. За повече информация вижте [Персонализирани модели за машинно обучение](custom-models.md).


[!INCLUDE[footer-include](../includes/footer-banner.md)]
---
title: Съвпадение на обекти за обединяване на данни
description: Съвпадение на обекти, за да създадете унифицирани клиентски профили.
ms.date: 02/23/2021
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: de53927f7ed1f58176a7ba83f89be7c39064947c
ms.sourcegitcommit: 5c9c54ffe045017c19f0042437ada2c101dcaa0f
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 07/22/2021
ms.locfileid: "6650305"
---
# <a name="match-entities"></a>Съпоставяне на обекти

Фазата на съвпадение указва как да комбинирате наборите от данни в набор от данни на унифициран клиентски профил. След попълване на [стъпка на картата](map-entities.md) в процеса на обединяване на данни сте готови да съпоставите вашите обекти. Фазата на съпоставяне изисква поне два нанесени обекта.

Страницата за съответствие се състои от три раздела: 
- Основни показатели, обобщаващи броя на съвпадащите записи
- Ред на съвпадение и правила за съвпадение между обектите
- Правила за дедупликация на съвпадения

## <a name="specify-the-match-order"></a>Укажете реда на съвпадението

Отидете на **Данни** > **Обединяване** > **Съвпадение** и изберете **Задаване на ред**, за да започне фазата на мача.

Всяко съвпадение обединява две или повече обекти в един, консолидиран обект. В същото време той поддържа уникалните клиентски записи. Например избрахме два обекта: **eCommerce:eCommerceContacts** като първичен обект и **LoyaltyScheme:loyCustomers** като вторичен. Редът на обектите посочва в кой ред системата ще се опита да съответства на записите.

:::image type="content" source="media/match-page.png" alt-text="Екранна снимка на страницата за съвпадение в областта Unify на процеса на обединяване на данни.":::
  
Първичният обект *eCommerce:eCommerceContacts* се съчетава със следващия обект *LoyaltyScheme:loyCustomers*. Наборът от данни, който е резултат от първата стъпка на съвпадение, се съчетава със следния обект, ако имате повече от два обекта.

> [!IMPORTANT]
> Обектът, който сте избрали за основен обект ще служи като основа за обединения набор от данни за профили. Допълнителни обекти, избрани по време на фазата на съвпадение, ще се добавят към този обект. Това не означава, че обединеният обект ще включва *всички* данни, включени в този обект.
>
> Има две съображения, които могат да ви помогнат да изберете йерархията на обектите:
>
> - Изберете обекта с най-пълните и надеждни данни за профила за вашите клиенти като основен обект.
> - Изберете обекта, който притежава няколко атрибута, общи с други обекти (например име, телефонен номер или имейл адрес), като основен обект.

След като посочите реда на съвпадение, ще видите дефинираните двойки на съвпадението в **Подробности за съответстващите записи** раздел на **Данни** > **Обединете** > **Съвпадение**. Ключовите показатели ще бъдат празни, докато процесът на съвпадение не завърши.

## <a name="define-rules-for-match-pairs"></a>Определете правила за двойки мачове

Правилата за съвпадение определят логиката, чрез която конкретна двойка обекти ще бъде съпоставена.

Предупреждението **Нуждае се от правила** до името на обекта предполага, че за двойка съвпадения не е дефинирано правило за съвпадение. 

:::image type="content" source="media/match-rule-add.png" alt-text="Екранна снимка на раздела Съответстващи записи с контрола за добавяне на маркирани правила.":::

1. Изберете **Добавете правила** по обект в **Подробности за съответстващите записи** раздел за определяне на правила за съвпадение.

1. В екрана **Създайте правило**, конфигурирайте условията за правилото.

   :::image type="content" source="media/match-rule-conditions.png" alt-text="Екранна снимка на правило за отворено съвпадение с добавени условия.":::

   - **Обект/поле (първи ред)**: Изберете свързана същност и атрибут, за да посочите свойство на записа, което вероятно е уникално за клиент. Например телефонен номер или имейл адрес. Избягвайте съвпадение по атрибути от тип дейност. Например идентификатор на покупка вероятно няма да намери съответствие в други типове записи.

   - **Обект / поле (втори ред)**: Изберете атрибут, който се отнася до атрибута на обекта, посочен в първия ред.

   - **Нормализирайте**: Изберете от следните опции за нормализиране на избраните атрибути. 
     - Пробел: Премахва всички интервали. *Здравей свят* става *ЗдравейСвят*.
     - Символи: Премахва всички символи и специални символи. *Head&Shoulder* става *HeadShoulder*.
     - Текст с малки букви: Преобразува всички символи в малки букви. *САМО ГЛАВНИ и Заглавни Букви* става *само главни и заглавни букви*.
     - Unicode в ASCII: Преобразува unicode нотация в ASCII символи. */u00B2* става *2*.
     - Числителни числа: Преобразува други цифрови системи, като римски цифри, в арабски цифри. *VIII* става *8*.
     - Семантични типове: Стандартизира имена, заглавия, телефонни номера, адреси и др. 

   - **Прецизност**: Задайте нивото на точност, за да кандидатствате за това състояние. 
     - **Основен**: Изберете от *Ниска*, *Средна*, *Висока* и *Точно*. Изберете **Точно** за съвпадение само на записи, които съвпадат на 100 процента. Изберете едно от другите нива за съвпадение на записи, които не са 100 процента идентични.
     - **Персонализиран**: Задайте процент, на който записите трябва да съвпадат. Системата ще съвпада само със записи, преминали този праг.

1. Въведете **име** за правилото.

1. [Добавете още условия](#add-conditions-to-a-rule) или изберете **Готово** за финализиране на правилото.

1. По желание, [добавете още правила](#add-rules-to-a-match-pair).

1. Изберете **Записване**, за да приложите промените.

### <a name="add-conditions-to-a-rule"></a>Добавяне на условия към правило

За да съчетаете обекти само ако атрибутите отговарят на множество условия, добавете още условия към правило за съвпадение. Условията са свързани с логически оператор И и по този начин се изпълняват само ако са изпълнени всички условия.

1. Отидете на **Данни** > **Обединете** > **Съвпадение** и изберете **редактиране** на правилото, към което искате да добавите условия.

1. В прозореца **Редактиране на правило** изберете **Добавяне на условие**.

1. Изберете **Готово**, за да запишете правилото.

### <a name="add-rules-to-a-match-pair"></a>Добавете правила към двойка съвпадения

Правилата за съвпадение представляват набор от условия. За да съпоставите обекти по условия въз основа на множество атрибути, добавете още правила

1.  Отидете на **Данни** > **Обединете** > **Съвпадение** и изберете **Добавяне на правило** на обекта, към който искате да добавите правила.

2. Следвайте стъпките в [Определете правила за двойки на съвпадение](#define-rules-for-match-pairs).

> [!NOTE]
> Редът на правилата има значение. Алгоритъмът за съвпадение се опитва да съвпадне въз основа на първото ви правило и продължава към второто правило, само ако не са идентифицирани съвпадения с първото правило.

### <a name="change-the-entity-order-in-match-rules"></a>Променете реда на обекта в правилата за съвпадение

Можете да пренареждате обекти за правила за съвпадение, за да промените реда, в който се обработват. Правила, които са в противоречие поради променена поръчка, ще бъдат премахнати. Трябва да пресъздадете премахнати правила с актуализирана конфигурация.

1. Отидете на **Данни** > **Обединяване** > **Съпоставяне** и изберете **редактиране**.

1. В екрана **Редактиране на правило** изберете контролата **Преместване нагоре/надолу** или плъзнете и пуснете обекти, за да промените реда.

   :::image type="content" source="media/reorder-match-rules.png" alt-text="Опции за промяна в реда на обработка на обектите във фазата на съвпадение.":::

1. Изберете **Готово**, за да запишете правилото.

## <a name="define-deduplication-on-a-match-entity"></a>Дефинирайте дедупликация на съвпадение

В допълнение към [правила за кръстосано съвпадение](#define-rules-for-match-pairs), можете също да посочите правила за дедупликации. *Дедупликация* е друг процес при съвпадение на записи. Той идентифицира дублиращи се записи и ги обединява в един запис. Изходните записи се свързват към обединения запис с алтернативни идентификатори.

Дедупликираните записи ще бъдат използвани в процеса на съвпадение между обектите. Дедупликацията се случва на отделни обекти и може да бъде конфигурирана на всеки обект, използван в двойки съвпадения.

Посочването на правила за дедупликация не е задължително. Ако не са конфигурирани такива правила, се прилагат дефинираните от системата правила. Те комбинират всички записи в един запис, преди да предадат данните на обекта на кръстосано съвпадение за подобрена производителност.

### <a name="add-deduplication-rules"></a>Добавяне на правила за дедублиране

1. Отидете на **Данни** > **Унифициране** > **Съпоставяне**.

1. В **Обединени дубликати** раздел, изберете **Задайте обекти**. В случай, че правилата за дедупликация вече са създадени, изберете **редактиране**.

1. В екрана **Обединяване на предпочитания** изберете обектите, към които искате да приложите дедупликация.

1. Посочете как да комбинирате дублираните записи и изберете една от трите опции:
   - **Най-попълвани**: Идентифицира записа с най-попълнени полета на атрибути като записа победител. Това е опцията за сливане по подразбиране.
   - **Най-скорошни**: Идентифицира записа на победителя въз основа на най-скорошни. Изисква дата или числово поле за определяне на скоростта.
   - **Най-нескорошни**: Идентифицира записа на победителя въз основа на най-нескорошни. Изисква дата или числово поле за определяне на скоростта.
 
   > [!div class="mx-imgBorder"]
   > ![Стъпка 1 на правила за дедубликация.](media/match-selfconflation.png "Стъпка 1 на правила за дедублиране")
 
1. След като обектите са избрани и тяхното предпочитание за обединяване е зададено, изберете **Добавете правило** да дефинира правилата за дедупликация на ниво обект.
   - **Изберете поле** изброява всички налични полета от този обект. Изберете полето, което искате да проверите за дубликати. Изберете полета, които вероятно са уникални за всеки отделен клиент. Например имейл адрес или комбинацията от име, град и телефонен номер.
   - Посочете настройките за нормализация и точност.
   - Определете допълнителни условия, като изберете **Добавете условие**.
 
   > [!div class="mx-imgBorder"]
   > ![Стъпка 2 на правила за дедубликация.](media/match-selfconflation-rules.png "Стъпка 2 на правила за дедублиране")

  Можете да създавате множество правила за дедублиране за даден обект. 

1. Изпълнението на процеса на съвпадение сега групира записите въз основа на условията, дефинирани в правилата за дедупликация. След групиране на записите се прилага политиката за сливане, за да се идентифицира печелившият запис.

1. След това този запис на победител се предава на съвпадението между обектите, заедно с записите без победители (например алтернативни идентификатори), за да се подобри качеството на съвпадение.

1. Всички персонализирани правила за съвпадение, дефинирани за презаписване на правила за дедупликация. Ако правилото за дедупликация идентифицира съвпадащи записи и правилото за персонализирано съвпадение е настроено никога да не съвпада с тези записи, тогава тези два записа няма да бъдат съпоставени.

1. След като [стартирате процеса на съвпадение](#run-the-match-process), ще видите статистиката за дедупликация в плочките за ключови показатели.

### <a name="deduplication-output-as-an-entity"></a>Дедупликация изход като обект

Процесът на дедупликация създава нов обект за всеки обект от двойките съвпадения, за да идентифицира дедуплицираните записи. Тези обекти могат да бъдат намерени заедно с **ConflationMatchPairs:CustomerInsights** в секцията **Система** на страницата **Обекти** с името **Deduplication_DataSource_Entity**.

Изходният обект за дедупликация съдържа следната информация:
- ИД/ключове
  - Поле за първичен ключ и полето за неговите алтернативни идентификатори. Полето за алтернативни идентификатори се състои от всички алтернативни идентификатори, идентифицирани за запис.
  - Полето Deduplication_GroupId показва групата или клъстера, идентифицирани в обект, който групира всички подобни записи въз основа на посочените полета за дедупликация. Това се използва за целите на системната обработка. Ако не са посочени ръчни правила за дедупликация и се прилагат дефинирани от системата правила за дедупликация, може да не намерите това поле в изходния обект на дедупликация.
  - Deduplication_WinnerId: Това поле съдържа идентификатора на победителя от идентифицираните групи или клъстери. Ако Deduplication_WinnerId е същото като стойността на основния ключ за запис, това означава, че записът е победител.
- Полета, използвани за определяне на правилата за дедупликация.
- Полета „Правило” и „Оценка”, за да се посочи кое от правилата за дедупликация е приложено и резултатът, върнат от алгоритъма за съвпадение.
   
## <a name="run-the-match-process"></a>Изпълнение на процеса на съпоставяне

С конфигурирани правила за съвпадение, включително правилата за съвпадение и дедупликация между обектите, можете да стартирате процеса на съпоставяне. 

Отидете на **Данни** > **Обединете** > **Съвпадение** и изберете **Изпълнение** за да стартирате процеса. Алгоритъмът за съвпадение отнема известно време и не можете да промените конфигурацията, докато не завърши. За да правите промени, можете да отмените изпълнението. Изберете състоянието на заданието и изберете **Отмяна на работа** на екрана **Подробности за напредъка**.

Ще намерите резултата от успешно изпълнение, обединения обект на потребителския профил, на страницата **Обекти**. Извиква се вашата обединена клиентска единица **Клиенти** в секцията **Профили**. Първият успешен мач създава унифицирания обект *Клиент*. Всички последващи изпълнения на съвпадение разширяват този обект.

> [!TIP]
> След като стартирате процеса на съпоставяне, изберете състоянието на процеса, за да отворите прозореца **Подробности за задача**. Това предоставя преглед на времето за обработка, последната дата на обработка и всички грешки и предупреждения, свързани със задачата. Изберете **Преглед на подробности**, за да видите кои обекти са участвали в процеса на съпоставяне, кои правила са приложени към тях и дали актуализациите са публикувани успешно.  
> Съществуват [шест вида статус](system.md#status-types) на задачите/процесите. Освен това повечето процеси [зависят от други процеси надолу по веригата](system.md#refresh-policies).  
> :::image type="content" source="media/process-detail-path.png" alt-text="Подробен път, за да получите подробности за обработката от връзката към състоянието на задачата.":::

## <a name="review-and-validate-your-matches"></a>Преглед и потвърждаване на съвпаденията

Отидете на **Данни** > **Обединяване** > **Съвпадение**, за да оцените качеството на вашите двойки мачове и да ги прецизирате, ако е необходимо.

Плочките в горната част на страницата показват ключови показатели, обобщаващи броя на съвпадащите записи и дубликати.

:::image type="content" source="media/match-KPIs.png" alt-text="Изрязана екранна снимка на ключовите показатели на страницата „Съвпадение“ с номера и подробности.":::

- **Уникални изходни записи** показва броя на отделните записи на източника, които са били обработени при последното изпълнение на съвпадение.
- **Съответстващи и несъответстващи записи** подчертава колко уникални записа остават след обработка на правилата на съвпадение.
- **Само съвпадащи записи** показва броя на съвпаденията във всичките ви двойки.

Можете да оцените резултатите от всяка двойка мачове и нейните правила в таблицата **Подробности за съответстващите записи**. Сравнете броя на записите, получени от двойка на мача, с процента на успешно съвпадащи записи.

Прегледайте правилата на двойка съвпадения, за да видите процента на успешно съвпадащи записи на ниво правило. Изберете многоточието (...) и след това изберете **Визуализация на съвпадение**, за да видите всички тези записи на ниво правило. Препоръчваме ви да разгледате някои записи, за да потвърдите, че те са съвпаднали правилно.

Опитайте различни прагове на точност при условия, за да намерите оптималната стойност.

  1. Изберете елипсата (...) за правилото, с което искате да експериментирате, и изберете **Редактиране**.

  2. Променете стойностите на точността в условията, които искате да промените.

  3. Изберете **преглед** така че вижте броя на съвпадащите и несравними записи за избраното условие.

## <a name="manage-match-rules"></a>Управление на правила за съпоставяне

Можете да преконфигурирате и прецизирате повечето параметри на съвпадението.

:::image type="content" source="media/match-rules-management.png" alt-text="Екранна снимка на падащото меню с опции за правила за съвпадение.":::

- **Променете реда на правилата**, ако сте дефинирали няколко правила. Можете да пренаредите правилата за съвпадение, като изберете **Преместване нагоре** и **Преместване надолу** опции или чрез плъзгане и пускане.

- **Променете условията на правилата**, като изберете **редактиране** и изберете различни полета.

- **Дезактивирайте правило**, за да запази правило за съвпадение, докато го изключва от процеса на съвпадение.

- **Дублирайте вашите правила**, ако сте определили правило за съвпадение и искате да създадете подобно правило с модификации, изберете **Дубликат**.

- **Изтрийте правило**, като изберете символа **Изтрий**.

## <a name="specify-custom-match-conditions"></a>Посочете персонализирани условия на съвпадение

Можете да укажете условия, че определени записи трябва винаги да съвпадат или никога да не съвпадат. Тези правила могат да бъдат качени, за да отменят стандартния процес на съвпадение. Например, ако в нашите записи има John Doe I и John Doe II, системата може да ги съпостави като един човек. Правилата за персонализирано съвпадение ви позволяват да посочите, че техните профили се отнасят до различни хора. 

1. Отидете на **Данни** > **Обединете** > **Съвпадение** и изберете **Персонализирано съвпадение** в **Подробности за съответстващите записи** раздел.

  :::image type="content" source="media/custom-match-create.png" alt-text="Екранна снимка на секцията за правила за съпоставяне с обозначена контрола за персонализирано съпоставяне":::

1. Ако нямате зададени персонализирани правила за съвпадение, ще видите нов панел **Персонализирано съвпадение** с повече подробности.

1. Изберете **Попълване на шаблона**, за да получите файл с шаблон, който може да определи кои записи от кои обекти трябва винаги да съвпадат или никога да не съвпадат. Ще трябва да попълните отделно записите „винаги съвпадат“ и записите „никога не съвпадат“ в два различни файла.

1. Шаблонът съдържа полета за указване на обекта и стойностите на първичния ключ на обекта, които ще се използват в персонализираното съвпадение. Например, ако искате първичен ключ *12345* от обекта *Продажби*, който винаги да съвпада с първичен ключ *34567* от *Контакт* обект, попълнете шаблона:
    - Обект1: Продажби
    - Ключ на обект1: 12345
    - Обект2: Договор
    - Ключ на обект2: 34567

   Един и същ файл с шаблон може да укаже записи на персонализирано съвпадение от множество обекти.
   
   Ако искате да зададете персонализирано съвпадение за дедупликация на обект, предоставете същия обект като Entity1 и Entity2 и задайте различните стойности на първичен ключ.

1. След като добавите всички замествания, които искате да приложите, запазете файла с шаблона.

1. Отидете на **Данни** > **Източници на данни** и поглъщайте файловете с шаблони като нови обекти. След като бъдат приети, можете да ги използвате, за да определите конфигурацията на съвпадение.

1. След като качите файловете и обектите са налични, изберете опцията **Персонализирано съвпадение** отново. Ще видите опции за указване на обектите, които искате да включите. Изберете необходимите обекти от падащото меню.

   :::image type="content" source="media/custom-match-overrides.png" alt-text="Екранна снимка на диалоговия прозорец, за да изберете замествания за персонализиран сценарий на съвпадение.":::

1. Изберете обектите, които искате да използвате за **Винаги съвпадат** и **Никога не съвпадат**, изберете **Готово**.

1. Изберете **Запазете** на **Съвпада** страница, за да приложите персонализираната конфигурация на съвпадението.

1. Изберете **Изпълнение** на страницата **Съпоставяне** за стартиране на процеса на съвпадение. Други зададени правила за съвпадение са заменени от персонализираната конфигурация за съвпадение.

> [!TIP]
> Отидете на **Данни** > **Субекти** и прегледайте обекта **ConflationMatchPair**, за да потвърди, че замените са приложени.

## <a name="next-step"></a>Следваща стъпка

След приключване на процеса на съвпадение за поне една двойка съвпадение, можете да разрешите евентуални противоречия в данните, като прегледате темата [**Обединяване**](merge-entities.md).


[!INCLUDE[footer-include](../includes/footer-banner.md)]

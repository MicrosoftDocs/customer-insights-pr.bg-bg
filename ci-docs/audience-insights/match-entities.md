---
title: Съвпадение на обекти за обединяване на данни
description: Съвпадение на обекти, за да създадете унифицирани клиентски профили.
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 78549037f9c9e59329f5423c36eeb058128802c0
ms.sourcegitcommit: cf9b78559ca189d4c2086a66c879098d56c0377a
ms.translationtype: HT
ms.contentlocale: bg-BG
ms.lasthandoff: 11/03/2020
ms.locfileid: "4405107"
---
# <a name="match-entities"></a>Съпоставяне на обекти

След като завършите фазата на нанасяне, вече сте готови за съпоставяне на обектите. Фазата на съвпадение указва как да комбинирате наборите от данни в набор от данни на унифициран клиентски профил. Фазата на съпоставяне изисква поне [два нанесени обекта](map-entities.md).

## <a name="specify-the-match-order"></a>Укажете реда на съвпадението

Отидете на **Обединяване** > **Съвпадение** и изберете **Задаване на ред**, за да стартирате фазата на съвпадение.

Всяко съвпадение обединява два или повече обекта в един обект, като същевременно запазва всеки уникален запис на клиент. В следващия пример избрахме три обекта: **ContactCSV: TestData** като **основен** обект, **WebAccountCSV: TestData** като **обект 2** и **CallRecordSmall: TestData** като **обект 3**. Диаграмата над селекциите илюстрира как ще бъде изпълнен реда за съвпадение.

> [!div class="mx-imgBorder"]
> ![Редактиране на реда на съвпадението на данни](media/configure-data-match-order-edit-page.png "Редактиране на реда на съвпадението на данни")
  
**Основният** обект се свързва с **Обект 2**. Наборът от данни, който произлиза от първото съвпадение, се съпоставя с **Обект 3**.
В този пример сме избрали само две съвпадения, но системата може да поддържа повече.

> [!IMPORTANT]
> Обектът, който сте избрали за **основен** обект ще служи като основа за обединения главен набор от данни. Допълнителни обекти, избрани по време на фазата на съвпадение, ще се добавят към този обект. В същото време това не означава, че обединеният обект ще включва *всички* данни, включени в този обект.
>
> Има две съображения, които могат да ви помогнат да изберете йерархията на обектите:
>
> - Кой обект смятате, че има най-пълни и надеждни данни за клиентите?
> - Обектът, който току-що идентифицирахте, има ли атрибути, които се споделят и от други обекти (например име, телефонен номер или имейл адрес)? Ако няма, изберете втория най-надежден обект.

Изберете **Готово**, за да запишете реда на съвпадение.

## <a name="define-rules-for-your-first-match-pair"></a>Определяне на правила за първата съпоставена двойка

След като посочите реда на съвпадение, ще видите определените съвпадения на страницата **Съвпадение**. Плочките в горната част на екрана ще останат празни, докато не изпълните реда на съвпадение.

> [!div class="mx-imgBorder"]
> ![Определяне на правила](media/configure-data-match-need-rules.png "Определяне на правила")

Предупреждението **Необходими са правила** подсказва, че не е определено правило за съвпадение за съпоставена двойка. Правилата за съвпадение определят логиката, чрез която конкретна двойка обекти ще бъде съпоставена.

1. За да определите първото си правило, отворете прозореца **Определение на правило**, като изберете съответния ред за съвпадение в таблицата със съвпадения (1) и след това изберете **Създаване на ново правило** (2).

   > [!div class="mx-imgBorder"]
   > ![Създаване на ново правило](media/configure-data-match-new-rule2.png "Създаване на ново правило")

2. В прозореца **Редактиране на правило** конфигурирайте условията за това правило. Всяко условие е представено от два реда, които включват задължителни селекции.

   > [!div class="mx-imgBorder"]
   > ![Прозорец за ново правило](media/configure-data-match-new-rule-condition.png "Прозорец за ново правило")

   Обект/Поле (първи) – атрибут, който ще се използва за съпоставяне от обекта на първата съпоставена двойка. Примерите могат да включват телефонен номер или имейл адрес. Изберете атрибут, който вероятно е уникален за клиента.

   > [!TIP]
   > Избягвайте съвпадението въз основа на атрибутите от тип дейност. С други думи, ако атрибутът изглежда е дейност, тогава може да е лош критерий за откриване на съвпадения.  

   Обект/Поле (втори) – атрибут, който ще се използва за съпоставяне от обекта на втората съпоставена двойка.

   Нормализиране – **Метод за нормализиране**: за избраните атрибути са налични различни опции за нормализиране. Например премахване на препинателни знаци или на интервали

   За нормализиране на името на организацията (преглед) можете също да изберете **Тип (телефон, име, организация)**

   > [!div class="mx-imgBorder"]
   > ![Нормализиране – B2B](media/match-normalization-b2b.png "Нормализиране – B2B")

   Ниво на точност – нивото на точност, което ще се използва за това състояние. Задаването на ниво на точност за условие за съвпадение може да е от два типа: **Основен** и **Персонализиран**.  
   - Основен: Предоставя ви четири опции за избор от: ниско, средно, високо и точно. Изберете **Точно** за съвпадение само на записи, които съвпадат на 100 процента. Изберете едно от другите нива за съвпадение на записи, които не са 100 процента идентични.
   - Персонализиран: Използвайте плъзгача, за да определите персонализирания процент, необходим за съвпадение на записите, или въведете стойност в областта **Персонализиран**. Системата ще съпоставя само записи, които преминават този праг като комбинирани съпоставени двойки. Стойностите на плъзгача са между 0 и 1. Така 0,64 представлява 64 процента.

3. Изберете **Готово**, за да запишете правилото.

### <a name="add-multiple-conditions"></a>Добавяне на няколко условия

За да съвпадат обектите само ако са изпълнени няколко условия, добавете още условия, които са свързани чрез оператор И.

1. В прозореца **Редактиране на правило** изберете **Добавяне на условие**. Можете също да изтриете условията, като изберете бутона за премахване до съществуващо условие.

2. Изберете **Готово**, за да запишете правилото.

## <a name="add-multiple-rules"></a>Добавяне на няколко правила

Всяко условие се прилага за една двойка атрибути, докато правилата представляват набор от условия. За да се съпоставят обектите с различни набори атрибути, можете да добавите още правила.

1. В статията за аудиторията отидете на **Данни** > **Обединете** > **Съвпадение**.

2. Изберете обекта, който искате да актуализирате и изберете **Добавяне на правила**.

3. Следвайте процедурата, както е описано в [Определяне на правила за първата съпоставена двойка](#define-rules-for-your-first-match-pair).

> [!NOTE]
> Редът на правилата е от значение. Алгоритъмът за съвпадение се опитва да съпоставя въз основа на първото правило и продължава към второто правило само ако не са идентифицирани съвпадения по първото правило.

## <a name="define-deduplication-on-a-match-entity"></a>Дефинирайте дедупликация на съвпадение

Заедно с посочването на правилата за съвпадение на обекти, както е посочено в горните раздели, можете да посочите и правила за дедупликации. *Дедупликация* е процес. Той идентифицира дублиращи се записи, обединява ги в един запис и свързва всички изходни записи към този обединен запис с алтернативни идентификатори към обединения запис.

След идентифицирането на дедубликиран запис този запис ще бъде използван в процеса на съвпадение между обектите. Дедупликацията се прилага на ниво обект и може да се приложи към всеки обект, използван в процеса на съвпадение.

### <a name="add-deduplication-rules"></a>Добавяне на правила за дедублиране

1. В статията за аудиторията отидете на **Данни** > **Обединете** > **Съвпадение**.

1. В **Обединени дубликати** раздел, изберете **Задайте обекти**.

1. В секцията **Обединяване на предпочитания** изберете обектите, към които искате да приложите дедупликация.

1. Посочете как да обедините дублираните записи и изберете една от трите опции за обединяване:
   - *Най-попълвани*: Идентифицира записа с най-попълнени атрибути като записа победител. Това е опцията за сливане по подразбиране.
   - *Най-скорошни*: Идентифицира записа на победителя въз основа на най-скорошни. Изисква дата или числово поле за определяне на скоростта.
   - *Най-нескорошни*: Идентифицира записа на победителя въз основа на най-нескорошни. Изисква дата или числово поле за определяне на скоростта.
 
   > [!div class="mx-imgBorder"]
   > ![Стъпка 1 на правила за дедублиране](media/match-selfconflation.png "Стъпка 1 на правила за дедублиране")
 
1. След като обектите са избрани и тяхното предпочитание за обединяване е зададено, изберете **Създайте ново правило** да дефинира правилата за дедупликация на ниво обект.
   - **Изберете поле** изброява всички налични полета от този обект, на който искате да дублирате източници на данни.
   - Посочете настройките за нормализиране и прецизност по подобен начин, както е посочено в съвпадението между обектите.
   - Можете да определите допълнителни условия, като изберете **Добавете условие**.
 
   > [!div class="mx-imgBorder"]
   > ![Стъпка 2 на правила за дедублиране](media/match-selfconflation-rules.png "Стъпка 2 на правила за дедублиране")

  Можете да създавате множество правила за дедублиране за даден обект. 

1. Изпълнението на процеса на съвпадение сега групира записите въз основа на условията, дефинирани в правилата за дедупликация. След групиране на записите се прилага политиката за сливане, за да се идентифицира печелившият запис.

1. След това този запис на победител се предава на съвпадението между обектите.

1. Всички персонализирани правила за съвпадение, дефинирани за винаги съвпадат и никога не съвпадат с отменящи правилата за дедупликация. Ако правилото за дедупликация идентифицира съвпадащи записи и правилото за персонализирано съвпадение е настроено никога да не съвпада с тези записи, тогава тези два записа няма да бъдат съпоставени.

1. След като стартирате процеса на съвпадение, ще видите статистиката за дедупликация.
   
> [!NOTE]
> Посочването на правила за дедупликация не е задължително. Ако не са конфигурирани такива правила, се прилагат дефинираните от системата правила. Те свиват всички записи, които споделят една и съща комбинация от стойности (точно съвпадение) от първичен ключ и полетата в правилата за съвпадение в един запис, преди да предадат данните на обекта на съвпадение между обектите за подобрена производителност и здравословна система.

## <a name="run-your-match-order"></a>Изпълнение на реда за съвпадение

След като дефинирате правилата за съвпадение, включително правилата за съвпадение и дедупликация между обектите, можете да стартирате реда за съвпадение. На страницата **Съвпадение** изберете **Изпълнение**, за да стартирате процеса. Изпълнението на алгоритъма за съвпадение може да отнеме известно време. Не можете да променяте свойствата на страницата **Съвпадение**, преди да приключи процесът на съвпадение. Ще намерите обекта на унифицирания клиентски профил, създаден в страницата **Обекти**. Унифицираният обект на клиент се нарича **ConflationMatchPairs : CustomerInsights**.

За да направите допълнителни промени и да изпълните отново стъпката, можете да отмените съпоставянето в ход. Изберете текста **Обновяване...** и изберете **Отмяна на задача** в долната част на страничния панел, който се показва.

Когато процесът на съпоставяне приключи, текстът **Обновяване...** ще се промени на **Успешно** и отново можете да използвате цялата функционалност на страницата.

Процесът на първото съвпадение води до създаването на обединен главен обект. Всички последващи изпълнения на съвпадение водят до разширяване на този обект.

> [!TIP]
> Съществуват [шест вида статус](system.md#status-types) на задачите/процесите. Освен това повечето процеси [зависят от други процеси надолу по веригата](system.md#refresh-policies). Можете да изберете състоянието на процес, за да видите подробности за напредъка на цялата задача. След като изберете **Вижте подробности** за една от задачите на заданието, ще намерите допълнителна информация: време за обработка, дата на последната обработка и всички грешки и предупреждения, свързани със задачата.

## <a name="review-and-validate-your-matches"></a>Преглед и потвърждаване на съвпаденията

Оценете качеството на съпоставените двойки и го прецизирайте:

- На страницата **Съвпадение** ще откриете две плочки, които показват първоначалните аналитични данни за данните ви.

  - **Уникални клиенти**: показва броя на уникалните профили, които системата идентифицира.
  - **Съвпадащи записи**: показва броя на съвпаденията във всички съпоставени двойки.

- В таблицата **Ред на съвпадение** можете да оцените резултатите от всяка съпоставена двойка, като сравните броя на записите, получени от този обект на съпоставени двойки, с процента на успешно съпоставени записи.

- В секцията **Правила** на обект в таблицата **Ред на съвпадение** ще намерите процента на успешно съпоставени записи на ниво правило. Като изберете символа на таблицата до дадено правило, можете да прегледате всички тези записи на ниво правило. Препоръчваме ви да прегледате поднабор от записи, за да проверите дали са съвпаднали правилно.

- Изпробвайте различни прагове на точност за условията, за да определите оптималната стойност.

  1. Изберете многоточието (...) за правилото за двойка съвпадения, което искате да изпробвате, и изберете **Редактиране**.

  2. Изберете условието, с което искате да изпробвате. Всеки критерий е представен от един ред в прозореца **Правило за съвпадение**.

  3. Това, което ще видите на страницата **Преглед на критерии** зависи от нивото на точност, което сте избрали за дадено условие. Намерете броя на съвпадащите и несъвпадащите записи за избраното условие.

     Вникнете задълбочено в ефектите на различните нива на прага. Можете да сравните колко записа ще бъдат съпоставени под всяко от нивата на прага и да прегледате записите под всяка опция. Изберете всяка от плочките и прегледайте данните в секцията на таблицата.

## <a name="optimize-your-matches"></a>Оптимизиране на съвпаденията

Повишете качеството, като преконфигурирате някои от параметрите за съвпадение:

- **Променете реда за съвпадение**, като изберете **Редактиране** и промените полетата за ред за съвпадение.

  > [!div class="mx-imgBorder"]
  > ![Редактиране на реда на съвпадението на данните](media/configure-data-match-order-edit.png "Редактиране на реда на съвпадението на данните")

- **Променете реда на правилата**, ако сте дефинирали няколко правила. Можете да пренаредите правилата за съвпадение, като изберете опциите **Преместване нагоре** и **Преместване надолу** в мрежата на правилата за съвпадение.

  > [!div class="mx-imgBorder"]
  > ![Промяна на ред на правило](media/configure-data-change-rule-order.png "Промяна на ред на правило")

- **Дублирайте правилата**, ако сте дефинирали правило за съвпадение и искате да създадете подобно правило с модификации. Направете го, като изберете **Дублиране**.

  > [!div class="mx-imgBorder"]
  > ![Дублиране на правило](media/configure-data-duplicate-rule.png "Дублиране на правило")

- **Редактирайте правилата**, като изберете символа **Редактиране**. Можете да приложите следните промени:

  - Промяна на атрибути за условие: Изберете нови атрибути в рамките на конкретния ред на условието.
  - Промяна на прага за условие: Настройте плъзгача за прецизност.
  - Промяна на метода за нормализиране на състояние: Актуализирайте метода за нормализиране.

## <a name="specify-your-custom-match-records"></a>Указване на записите на персонализирано съвпадение

Можете да укажете условия, че определени записи трябва винаги да съвпадат или никога да не съвпадат. Тези правила могат да бъдат качени групово в процеса на съвпадение.

1. Изберете опцията **Персонализирано съвпадение** на екрана **Ред на съвпадение**.

   > [!div class="mx-imgBorder"]
   > ![Създаване на персонализирано съвпадение](media/custom-match-create.png "Създаване на персонализирано съвпадение")

2. Ако нямате качени обекти, ще видите нов диалогов прозорец **Персонализирано съвпадение**, който ви подканва да попълните някои подробности. Ако сте предоставили тези подробности по-рано, преминете към стъпка 8.

   > [!div class="mx-imgBorder"]
   > ![Нов диалогов прозорец за персонализирано съвпадение](media/custom-match-new-dialog-box.png "Нов диалогов прозорец за персонализирано съвпадение")

3. Изберете **Попълване на шаблона**, за да получите файл с шаблон, който може да определи кои записи от кои обекти трябва винаги да съвпадат или никога да не съвпадат. Ще трябва да попълните отделно записите „винаги съвпадат“ и записите „никога не съвпадат“ в два различни файла.

4. Шаблонът съдържа полета за указване на обекта и стойностите на първичния ключ на обекта, които ще се използват в персонализираното съвпадение. Например, ако искате първичен ключ 12345 от обект на продажби винаги да съвпада с първичен ключ 34567 от обект на контакт, ще трябва да укажете, както следва:
    - Обект1: Продажби
    - Ключ на обект1: 12345
    - Обект2: Договор
    - Ключ на обект2: 34567

   Един и същ файл с шаблон може да укаже записи на персонализирано съвпадение от множество обекти.

5. След като добавите всички замествания, които искате да приложите, запазете файла с шаблона.

6. Отидете на **Данни** > **Източници на данни** и поглъщайте файловете с шаблони като нови обекти. След като бъдат приети, можете да ги използвате, за да определите конфигурацията на съвпадение.

7. След като качите файловете и обектите са налични, изберете опцията **Персонализирано съвпадение** отново. Ще видите опции за указване на обектите, които искате да включите. Изберете необходимите обекти от падащото меню.

   > [!div class="mx-imgBorder"]
   > ![Замествания на персонализирано съвпадение](media/custom-match-overrides.png "Замествания на персонализирано съвпадение")

8. Изберете обектите, които искате да използвате за **Винаги съвпадат** и **Никога не съвпадат**, изберете **Готово**.

9. Изберете **Записване** на страницата **Съвпадение** за конфигурацията на персонализираното съвпадение, която току-що зададохте.

10. Изберете **Изпълнение** на страницата **Съвпадение**, за да стартирате процеса на съвпадение и конфигурацията на персонализираното съвпадение ще влезе в сила. Всички правила за съвпадение на системата, се заместват от конфигурационния набор.

11. След като съвпадението приключи, можете да проверите обекта **ConflationMatchPair**, за да потвърдите, че заместванията са приложени в слетите съвпадения.

## <a name="next-step"></a>Следваща стъпка

След приключване на процеса на съвпадение за поне една двойка съвпадение, можете да разрешите евентуални противоречия в данните, като прегледате темата [**Обединяване**](merge-entities.md).
